# Project Roadmap & Development Phases

## Обзор фаз разработки

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        AI-BOOKING ROADMAP                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  PHASE 1: MVP                    PHASE 2: GROWTH        PHASE 3: SCALE  │
│  ───────────────                 ─────────────          ─────────────   │
│                                                                          │
│  [Foundation]─────────►[Telegram Bot]─────►[Instagram]─────►[Mobile]    │
│       │                     │                   │              │        │
│       │                     │                   │              │        │
│  Week 1-2              Week 5-8             Week 9-14      Week 15+     │
│  Infrastructure        AI + Bot             Integrations   Apps         │
│                                                                          │
│  Week 3-4                                                               │
│  Dashboard UI                                                           │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## Phase 1: MVP (8 недель)

### Sprint 1: Foundation (Week 1-2)

#### Цели
- Настройка инфраструктуры
- Базовая авторизация
- Схема базы данных

#### Задачи

| # | Задача | Приоритет | Время | Зависимости |
|---|--------|-----------|-------|-------------|
| 1.1 | Создание Supabase проекта | P0 | 2h | - |
| 1.2 | Применение миграций БД | P0 | 4h | 1.1 |
| 1.3 | Настройка RLS политик | P0 | 4h | 1.2 |
| 1.4 | Next.js проект (create-next-app) | P0 | 2h | - |
| 1.5 | Настройка Tailwind + shadcn/ui | P0 | 2h | 1.4 |
| 1.6 | Supabase Auth интеграция | P0 | 6h | 1.1, 1.4 |
| 1.7 | Страница логина/регистрации | P0 | 4h | 1.6 |
| 1.8 | Protected routes middleware | P0 | 3h | 1.6 |
| 1.9 | CI/CD pipeline (Vercel) | P1 | 3h | 1.4 |
| 1.10 | Настройка ESLint + Prettier | P1 | 1h | 1.4 |

#### Deliverables
- [ ] Рабочий Supabase с миграциями
- [ ] Next.js с авторизацией
- [ ] Пользователь может зарегистрироваться и войти

---

### Sprint 2: Vendor Dashboard Core (Week 3-4)

#### Цели
- Онбординг мастера
- Управление услугами
- Базовый календарь

#### Задачи

| # | Задача | Приоритет | Время | Зависимости |
|---|--------|-----------|-------|-------------|
| 2.1 | Онбординг flow (wizard) | P0 | 8h | 1.7 |
| 2.2 | AI распознавание прайса (GPT-4V) | P0 | 8h | 2.1 |
| 2.3 | CRUD услуг (UI) | P0 | 6h | 2.1 |
| 2.4 | Настройка рабочего графика | P0 | 6h | 2.1 |
| 2.5 | Календарь бронирований (view) | P0 | 8h | 2.3, 2.4 |
| 2.6 | Ручное создание записи | P1 | 4h | 2.5 |
| 2.7 | Список клиентов | P1 | 4h | 2.1 |
| 2.8 | Профиль мастера (настройки) | P1 | 4h | 2.1 |
| 2.9 | QR-код генератор | P2 | 3h | 2.1 |
| 2.10 | Responsive design проверка | P1 | 4h | 2.1-2.8 |

#### Deliverables
- [ ] Мастер может настроить профиль через фото прайса
- [ ] Календарь показывает записи
- [ ] Работает на мобильном

---

### Sprint 3: Telegram Bot (Week 5-6)

#### Цели
- Telegram бот-агрегатор
- AI диалоги
- Бронирование через бот

#### Задачи

| # | Задача | Приоритет | Время | Зависимости |
|---|--------|-----------|-------|-------------|
| 3.1 | Создание Telegram бота | P0 | 2h | - |
| 3.2 | Webhook Edge Function | P0 | 4h | 3.1 |
| 3.3 | Роутинг по vendor (start param) | P0 | 4h | 3.2 |
| 3.4 | AI Orchestrator сервис | P0 | 12h | 3.2 |
| 3.5 | Function: get_services | P0 | 4h | 3.4 |
| 3.6 | Function: check_availability | P0 | 6h | 3.4 |
| 3.7 | Function: create_booking | P0 | 6h | 3.4 |
| 3.8 | Сохранение истории диалогов | P0 | 4h | 3.4 |
| 3.9 | Inline кнопки для выбора | P1 | 4h | 3.4 |
| 3.10 | Получение контакта клиента | P0 | 3h | 3.7 |

#### Deliverables
- [ ] Клиент может записаться через Telegram
- [ ] AI понимает естественный язык
- [ ] Записи появляются в календаре мастера

---

### Sprint 4: Web Widget & Polish (Week 7-8)

#### Цели
- Публичная страница записи
- Уведомления
- Тестирование и фикс багов

#### Задачи

| # | Задача | Приоритет | Время | Зависимости |
|---|--------|-----------|-------|-------------|
| 4.1 | Публичная страница /[slug] | P0 | 6h | 2.3 |
| 4.2 | Выбор услуги (UI) | P0 | 4h | 4.1 |
| 4.3 | Календарь выбора даты | P0 | 4h | 4.1 |
| 4.4 | Слоты времени (UI) | P0 | 4h | 4.3 |
| 4.5 | OTP верификация телефона | P0 | 6h | 4.4 |
| 4.6 | Email уведомления (Resend) | P1 | 4h | 4.5, 3.7 |
| 4.7 | Telegram уведомления мастеру | P0 | 4h | 3.7 |
| 4.8 | Напоминания клиенту (cron) | P1 | 6h | 3.7 |
| 4.9 | E2E тестирование | P1 | 8h | 4.1-4.8 |
| 4.10 | Performance оптимизация | P2 | 4h | 4.9 |

#### Deliverables
- [ ] Клиент может записаться через веб
- [ ] Мастер получает уведомления
- [ ] Система стабильна для первых пользователей

---

## Phase 2: Growth (6 недель)

### Sprint 5-6: Instagram Integration (Week 9-12)

| # | Задача | Приоритет |
|---|--------|-----------|
| 5.1 | Facebook Developer App setup | P0 |
| 5.2 | OAuth flow для Instagram Business | P0 |
| 5.3 | Instagram webhook handler | P0 |
| 5.4 | AI ответы в Instagram DM | P0 |
| 5.5 | Token refresh механизм | P0 |
| 5.6 | Модерация Meta App Review | P0 |

### Sprint 7: Telegram Business (Week 13-14)

| # | Задача | Приоритет |
|---|--------|-----------|
| 6.1 | Telegram Business connection flow | P0 |
| 6.2 | Ответы от имени мастера | P0 |
| 6.3 | Handoff (передача мастеру) | P0 |
| 6.4 | UI настройки в дашборде | P0 |

---

## Phase 3: Scale (Ongoing)

### Sprint 8+: Advanced Features

- Онлайн-оплата депозита (Stripe/YooKassa)
- Программа лояльности
- Реферальная система
- WhatsApp Business API
- Мобильное приложение (React Native / Expo)
- Маркетплейс мастеров
- Аналитика и отчёты

---

## Технический долг (Tech Debt Backlog)

| ID | Описание | Критичность | Когда |
|----|----------|-------------|-------|
| TD-1 | Rate limiting для API | High | Phase 2 |
| TD-2 | Кэширование ответов AI | Medium | Phase 2 |
| TD-3 | Мониторинг и алерты (Sentry) | High | Phase 1 end |
| TD-4 | Load testing | Medium | Phase 2 |
| TD-5 | Документация API (OpenAPI) | Low | Phase 2 |
| TD-6 | Backup стратегия БД | High | Phase 1 end |

---

## Definition of Done (DoD)

Задача считается выполненной, если:

1. **Код**
   - [ ] Код написан и работает
   - [ ] TypeScript без ошибок
   - [ ] ESLint без warnings

2. **Тестирование**
   - [ ] Unit тесты (для бизнес-логики)
   - [ ] Ручное тестирование на staging

3. **Review**
   - [ ] Code review пройден
   - [ ] Нет security issues

4. **Deploy**
   - [ ] Задеплоено на staging
   - [ ] Проверено на production после merge

---

## Риски и митигация

### Технические риски

| Риск | Вероятность | Влияние | Митигация |
|------|-------------|---------|-----------|
| OpenAI API downtime | Low | High | Fallback на Claude API |
| Instagram API отказ модерации | Medium | High | Фокус на Telegram, повторная подача |
| Высокие расходы на AI | Medium | Medium | Лимиты, кэширование, prompt оптимизация |

### Бизнес-риски

| Риск | Вероятность | Влияние | Митигация |
|------|-------------|---------|-----------|
| Низкая конверсия в платные | Medium | High | Правильный Free tier, CustDev |
| Конкуренты скопируют | High | Medium | Скорость развития, уникальный UX |

---

## Метрики успеха по фазам

### Phase 1 (MVP)
- 10 активных мастеров
- 100 успешных бронирований
- NPS > 40

### Phase 2 (Growth)
- 100 активных мастеров
- 1000 бронирований/месяц
- 10% конверсия Free → Paid

### Phase 3 (Scale)
- 1000+ мастеров
- $10k MRR
- Churn < 5%
